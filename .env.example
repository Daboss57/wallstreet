# Primary connection (Supabase direct 5432)
DATABASE_URL_DIRECT=postgresql://USER:PASSWORD@HOST:5432/postgres

# Fallback connection (Supabase session pooler)
DATABASE_URL_POOLER=postgresql://USER:PASSWORD@POOLER_HOST:6543/postgres

# Backward compatibility alias during rollout (optional)
# DATABASE_URL=postgresql://USER:PASSWORD@HOST:5432/postgres

DB_CONNECT_MODE=direct
DB_FALLBACK_ENABLED=true
DB_CONNECT_TIMEOUT_MS=5000
DB_RETRY_MAX_ATTEMPTS=5
DB_RETRY_BASE_MS=250
DB_RETRY_MAX_MS=5000
DB_DIRECT_RETRY_COOLDOWN_MS=60000
DB_POOL_MAX=10

# TLS controls for Postgres connections
# Keep true when your provider uses a trusted public certificate chain.
# Set to false only if your runtime/network injects a self-signed chain.
DB_SSL_REJECT_UNAUTHORIZED=true
# If you see SELF_SIGNED_CERT_IN_CHAIN in /readyz, set DB_SSL_REJECT_UNAUTHORIZED=false.
# DB_SSL_DISABLED=false
# DB_SSL_CA=
# DB_SSL_CA_BASE64=

PAUSE_BACKGROUND_ON_DB_DOWN=true
DB_HEALTH_CHECK_INTERVAL_MS=10000

# Railway: force IPv4-first DNS answers in Node
NODE_OPTIONS=--dns-result-order=ipv4first

# Market simulation tuning (lower values = calmer market)
MARKET_VOLATILITY_MULTIPLIER=0.35
MARKET_SHOCK_MULTIPLIER=0.55
MARKET_SPREAD_MULTIPLIER=0.65
MARKET_ORDER_FLOW_MULTIPLIER=0.4
MARKET_GARCH_ALPHA=0.06
MARKET_GARCH_BETA=0.9
MARKET_VOL_MIN_FACTOR=0.15
MARKET_VOL_MAX_FACTOR=1.75
MARKET_NEWS_VOL_SPIKE_MULTIPLIER=1.35
MARKET_MIN_PRICE_FACTOR=0.55
MARKET_HARD_MIN_PRICE_FACTOR=0.12
MARKET_MAX_PRICE_FACTOR=1.85
MARKET_MAX_TICK_MOVE_PCT=0.0035
MARKET_MAX_NEWS_MOVE_PCT=0.025
MARKET_MEAN_REVERSION_MULTIPLIER=2.5
MARKET_ORDER_FLOW_DECAY=0.25
MARKET_MAX_ORDER_FLOW_MOVE_PCT=0.0015
NEWS_IMPACT_MULTIPLIER=0.45
NEWS_MIN_INTERVAL_MS=30000
NEWS_MAX_INTERVAL_MS=180000
EXECUTION_REALISM_ENABLED=true
MARKET_REGIME_ENABLED=true
MARKET_REGIME_REVIEW_INTERVAL_MS=240000
MARKET_EVENT_SHOCK_DURATION_MS=180000
DEBUG_EXECUTION_DIAGNOSTICS=false
MAX_ORDER_NOTIONAL_FRACTION=0.35
MIN_ORDER_NOTIONAL=50

JWT_SECRET=change-me
PORT=3000
